import os
Import('*')

lib = "modeling"
# these modules will compiled in to library
lib_modules = """
			  i-modeling.cpp
			  spongeabc4d.cpp
			  damp4t10d.cpp
			  enquistabc2d.cpp
			  zjh4t10dsponge.cpp
			  zjh4t10dspongevelnotrans.cpp
			  damp4t10dnotrans.cpp
              """.split()

extra_include_dir = [
  os.environ['RSFROOT'] + '/include',
  "#" + dirs['util'],
  '#' + dirs['common'],
  '#' + dirs['mdlib'],
]

############################### for library ###########################
#######################################################################
# clone the environment from global env and make some modification of it
myenv    = env.Clone(CPPPATH = extra_include_dir)
myenv.Append(CXXFLAGS = '-DNO_BLAS')

# compile to object files
lib_objs = myenv.StaticObject(lib_modules)

# compile library
lib_ar   = myenv.StaticLibrary(target = lib, source = lib_objs)

# install
myenv.Install("#" + dirs['lib'], lib_ar)
